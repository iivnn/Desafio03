{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { HttpClient, HttpXhrBackend } from '@angular/common/http';\nlet FilmsComponent = class FilmsComponent {\n  constructor(http) {\n    this.results = [];\n    http.get(\"https://swapi.dev/api/films\").subscribe(result => {\n      this.results = result.results;\n    }, error => console.error(error));\n  }\n  getFilmCharacters(id) {\n    var result = this.results.find(x => x.episode_id == id);\n    var index = this.results.findIndex(x => x.episode_id == id);\n    if (index > 0 && this.results[index].charactersInfo == null) {\n      this.results[index].charactersInfo = [];\n      const httpClient = new HttpClient(new HttpXhrBackend({\n        build: () => new XMLHttpRequest()\n      }));\n      result?.characters.forEach(x => {\n        httpClient.get(x).subscribe(result => {\n          this.results[index].charactersInfo.push(result);\n        }, error => console.error(error));\n      });\n    }\n  }\n};\nFilmsComponent = __decorate([Component({\n  selector: 'app-films-component',\n  templateUrl: './films.component.html'\n})], FilmsComponent);\nexport { FilmsComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAASC,UAAU,EAAEC,cAAc,QAAQ,sBAAsB;AAO1D,IAAMC,cAAc,GAApB,MAAMA,cAAc;EAIzBC,YAAYC,IAAgB;IAFrB,YAAO,GAAc,EAAE;IAG5BA,IAAI,CAACC,GAAG,CAAO,6BAA6B,CAAC,CAACC,SAAS,CAACC,MAAM,IAAG;MAC/D,IAAI,CAACC,OAAO,GAAGD,MAAM,CAACC,OAAO;IAC/B,CAAC,EAAEC,KAAK,IAAIC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CAAC;EACnC;EAEAE,iBAAiB,CAACC,EAAU;IAC1B,IAAIL,MAAM,GAAG,IAAI,CAACC,OAAO,CAACK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,UAAU,IAAIH,EAAE,CAAC;IAEvD,IAAII,KAAK,GAAG,IAAI,CAACR,OAAO,CAACS,SAAS,CAACH,CAAC,IAAIA,CAAC,CAACC,UAAU,IAAIH,EAAE,CAAC;IAE3D,IAAII,KAAK,GAAG,CAAC,IAAI,IAAI,CAACR,OAAO,CAACQ,KAAK,CAAC,CAACE,cAAc,IAAI,IAAI,EAAE;MAE3D,IAAI,CAACV,OAAO,CAACQ,KAAK,CAAC,CAACE,cAAc,GAAG,EAAE;MAEvC,MAAMC,UAAU,GAAG,IAAInB,UAAU,CAAC,IAAIC,cAAc,CAAC;QACnDmB,KAAK,EAAE,MAAM,IAAIC,cAAc;OAChC,CAAC,CAAC;MAEHd,MAAM,EAAEe,UAAU,CAACC,OAAO,CAACT,CAAC,IAAG;QAC7BK,UAAU,CAACd,GAAG,CAAYS,CAAC,CAAC,CAACR,SAAS,CAACC,MAAM,IAAG;UAC9C,IAAI,CAACC,OAAO,CAACQ,KAAK,CAAC,CAACE,cAAc,CAACM,IAAI,CAACjB,MAAM,CAAC;QACjD,CAAC,EAAEE,KAAK,IAAIC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CAAC;MACnC,CAAC,CAAC;;EAEN;CACD;AA9BYP,cAAc,eAL1BH,SAAS,CAAC;EACT0B,QAAQ,EAAE,qBAAqB;EAC/BC,WAAW,EAAE;CACd,CAAC,GAEWxB,cAAc,CA8B1B;SA9BYA,cAAc","names":["Component","HttpClient","HttpXhrBackend","FilmsComponent","constructor","http","get","subscribe","result","results","error","console","getFilmCharacters","id","find","x","episode_id","index","findIndex","charactersInfo","httpClient","build","XMLHttpRequest","characters","forEach","push","selector","templateUrl"],"sourceRoot":"","sources":["C:\\Users\\iivan\\OneDrive\\Documentos\\GitHub\\Desafio03\\Parte2\\Parte2\\ClientApp\\src\\app\\films\\films.component.ts"],"sourcesContent":["import { Component, Inject } from '@angular/core';\r\nimport { HttpClient, HttpXhrBackend } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-films-component',\r\n  templateUrl: './films.component.html'\r\n})\r\n\r\nexport class FilmsComponent {\r\n\r\n  public results: Results[] = [];\r\n\r\n  constructor(http: HttpClient) {\r\n    http.get<Film>(\"https://swapi.dev/api/films\").subscribe(result => {\r\n      this.results = result.results;\r\n    }, error => console.error(error));\r\n  }\r\n\r\n  getFilmCharacters(id: number) {\r\n    var result = this.results.find(x => x.episode_id == id);\r\n\r\n    var index = this.results.findIndex(x => x.episode_id == id);\r\n\r\n    if (index > 0 && this.results[index].charactersInfo == null) {\r\n\r\n      this.results[index].charactersInfo = [];\r\n\r\n      const httpClient = new HttpClient(new HttpXhrBackend({\r\n        build: () => new XMLHttpRequest()\r\n      }));\r\n\r\n      result?.characters.forEach(x => {\r\n        httpClient.get<Character>(x).subscribe(result => {\r\n          this.results[index].charactersInfo.push(result);\r\n        }, error => console.error(error));\r\n      }) \r\n    }   \r\n  }\r\n}\r\n\r\ninterface Film {\r\n  count: string;\r\n  results: Results[];\r\n}\r\n\r\ninterface Results {\r\n  title: string;\r\n  episode_id: number;\r\n  opening_crawl: string;\r\n  director: string;\r\n  producer: string;\r\n  release_date: string;\r\n  characters: string[];\r\n  charactersInfo: Character[];\r\n}\r\n\r\ninterface Character {\r\n  name: string;\r\n  height: string;\r\n  mass: string;\r\n  hair_color: string;\r\n  skin_color: string;\r\n  eye_color: string;\r\n  birth_year: string;\r\n  gender: string\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}